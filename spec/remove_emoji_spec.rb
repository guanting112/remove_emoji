require 'minitest/autorun'
require 'remove_emoji'
require 'benchmark'

describe 'RemoveEmoji::Sanitize' do

  describe 'ç”¨ä¸€èˆ¬æ–‡å­—æ¸¬è©¦ sanitize æ–¹æ³•ï¼Œæ˜¯å¦èƒ½æ­£å¸¸é‹ä½œ' do

    it 'å¿…é ˆæ¸…é™¤ä»¥ä¸‹å¸¸è¦‹çš„ emoji ç¬¦è™Ÿ' do
      original_string = <<-STRING
...â€¼â‰â„¢â†”â†•â†–â†—â†˜â†™â†©â†ªâŒšâŒ›âŒ¨ââ©âªâ«â¬â­â®â¯â°â±â²
â³â¸â¹âºâ“‚â–ªâ–«â–¶â—€â—»â—¼â—½â—¾â˜€â˜â˜‚â˜ƒâ˜„â˜â˜‘â˜”â˜•â˜˜â˜â˜ â˜¢â˜£â˜¦â˜ªâ˜®â˜¯â˜¸
â˜¹â˜ºâ™€â™‚â™ˆâ™‰â™Šâ™‹â™Œâ™â™â™â™â™‘â™’â™“â™ â™£â™¥â™¦â™¨â™»â™¿âš’âš“âš”âš•âš–âš—âš™âš›
âšœâš âš¡âšªâš«âš°âš±âš½âš¾â›„â›…â›ˆâ›â›â›‘â›“â›”â›©â›ªâ›°â›±â›²â›³â›´â›µâ›·â›¸
â›¹â›ºâ›½âœ‚âœ…âœˆâœ‰âœŠâœ‹âœŒâœâœâœ’âœ”âœ–âœâœ¡âœ¨âœ³âœ´â„â‡âŒââ“â”â•â—â£â¤â•â–â—â¡â¤´
â¤µâ¬…â¬†â¬‡â¬›â¬œâ­â­•ã€°ã€½ãŠ—ãŠ™ğŸ€„ğŸƒğŸ…°ğŸ…±ğŸ…¾ğŸ…¿ğŸ†ğŸ†‘ğŸ†’ğŸ†“ğŸ†”ğŸ†•ğŸ†–ğŸ†—ğŸ†˜ğŸ†™ğŸ†šğŸˆ
ğŸˆ‚ğŸˆšğŸˆ¯ğŸˆ²ğŸˆ³ğŸˆ´ğŸˆµğŸˆ¶ğŸˆ·ğŸˆ¸ğŸˆ¹ğŸˆºğŸ‰ğŸ‰‘ğŸŒ€ğŸŒğŸŒ‚ğŸŒƒğŸŒ„ğŸŒ…ğŸŒ†ğŸŒ‡ğŸŒˆğŸŒ‰ğŸŒŠğŸŒ‹ğŸŒŒğŸŒ
ğŸŒğŸŒğŸŒğŸŒ‘ğŸŒ’ğŸŒ“ğŸŒ”ğŸŒ•ğŸŒ–ğŸŒ—ğŸŒ˜ğŸŒ™ğŸŒšğŸŒ›ğŸŒœğŸŒğŸŒğŸŒŸğŸŒ ğŸŒ¡ğŸŒ¤ğŸŒ¥ğŸŒ¦ğŸŒ§ğŸŒ¨ğŸŒ©ğŸŒª
ğŸŒ«ğŸŒ¬ğŸŒ°ğŸŒ±ğŸŒ²ğŸŒ³ğŸŒ´ğŸŒµğŸŒ¶ğŸŒ·ğŸŒ¸ğŸŒ¹ğŸŒºğŸŒ»ğŸŒ¼ğŸŒ½ğŸŒ¾ğŸŒ¿ğŸ€ğŸğŸ‚ğŸƒğŸ„ğŸ…ğŸ†ğŸ‡ğŸˆ
ğŸ‰ğŸŠğŸ‹ğŸŒğŸğŸğŸğŸğŸ‘ğŸ’ğŸ“ğŸ”ğŸ•ğŸ–ğŸ—ğŸ˜ğŸ™ğŸšğŸ›ğŸœğŸğŸğŸŸğŸ ğŸ¡ğŸ¢ğŸ£
ğŸ¤ğŸ¥ğŸ¦ğŸ§ğŸ¨ğŸ©ğŸªğŸ«ğŸ¬ğŸ­ğŸ®ğŸ¯ğŸ°ğŸ±ğŸ²ğŸ³ğŸ´ğŸµğŸ¶ğŸ·ğŸ¸ğŸ¹ğŸºğŸ»ğŸ¼ğŸ½ğŸ€
ğŸğŸ‚ğŸƒğŸ„ğŸ…ğŸ†ğŸ‡ğŸˆğŸ‰ğŸŠğŸ‹ğŸŒğŸğŸğŸğŸğŸ‘ğŸ’ğŸ“ğŸ–ğŸ—ğŸ™ğŸšğŸ›ğŸğŸŸğŸ 
ğŸ¡ğŸ¢ğŸ£ğŸ¤ğŸ¥ğŸ¦ğŸ§ğŸ¨ğŸ©ğŸªğŸ«ğŸ¬ğŸ­ğŸ®ğŸ¯ğŸ°ğŸ±ğŸ²ğŸ³ğŸ´ğŸµğŸ¶ğŸ·ğŸ¸ğŸ¹ğŸºğŸ»
ğŸ¼ğŸ½ğŸ¾ğŸ¿ğŸ€ğŸğŸ‚ğŸƒğŸ„ğŸ…ğŸ†ğŸ‡ğŸˆğŸ‰ğŸŠğŸ‹ğŸŒğŸğŸğŸ”ğŸ•ğŸ–ğŸ—ğŸ˜ğŸ™ğŸšğŸ›
ğŸœğŸğŸğŸŸğŸ ğŸ¡ğŸ¢ğŸ£ğŸ¤ğŸ¥ğŸ¦ğŸ§ğŸ¨ğŸ©ğŸªğŸ«ğŸ¬ğŸ­ğŸ®ğŸ¯ğŸ°ğŸ³ğŸ´ğŸµğŸ·ğŸ€ğŸ
ğŸ‚ğŸƒğŸ„ğŸ…ğŸ†ğŸ‡ğŸˆğŸ‰ğŸŠğŸ‹ğŸŒğŸğŸğŸğŸğŸ‘ğŸ’ğŸ“ğŸ”ğŸ•ğŸ–ğŸ—ğŸ˜ğŸ™ğŸšğŸ›ğŸœ
ğŸğŸğŸŸğŸ ğŸ¡ğŸ¢ğŸ£ğŸ¤ğŸ¥ğŸ¦ğŸ§ğŸ¨ğŸ©ğŸªğŸ«ğŸ¬ğŸ­ğŸ®ğŸ¯ğŸ°ğŸ±ğŸ²ğŸ³ğŸ´ğŸµğŸ¶ğŸ·
ğŸ¸ğŸ¹ğŸºğŸ»ğŸ¼ğŸ½ğŸ¾ğŸ¿ğŸ‘€ğŸ‘ğŸ‘‚ğŸ‘ƒğŸ‘„ğŸ‘…ğŸ‘†ğŸ‘‡ğŸ‘ˆğŸ‘‰ğŸ‘ŠğŸ‘‹ğŸ‘ŒğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘‘ğŸ‘’
ğŸ‘“ğŸ‘”ğŸ‘•ğŸ‘–ğŸ‘—ğŸ‘˜ğŸ‘™ğŸ‘šğŸ‘›ğŸ‘œğŸ‘ğŸ‘ğŸ‘ŸğŸ‘ ğŸ‘¡ğŸ‘¢ğŸ‘£ğŸ‘¤ğŸ‘¥ğŸ‘¦ğŸ‘§ğŸ‘¨ğŸ‘©ğŸ‘ªğŸ‘«ğŸ‘¬ğŸ‘­
ğŸ‘®ğŸ‘¯ğŸ‘°ğŸ‘±ğŸ‘²ğŸ‘³ğŸ‘´ğŸ‘µğŸ‘¶ğŸ‘·ğŸ‘¸ğŸ‘¹ğŸ‘ºğŸ‘»ğŸ‘¼ğŸ‘½ğŸ‘¾ğŸ‘¿ğŸ’€ğŸ’ğŸ’‚ğŸ’ƒğŸ’„ğŸ’…ğŸ’†ğŸ’‡ğŸ’ˆ
ğŸ’‰ğŸ’ŠğŸ’‹ğŸ’ŒğŸ’ğŸ’ğŸ’ğŸ’ğŸ’‘ğŸ’’ğŸ’“ğŸ’”ğŸ’•ğŸ’–ğŸ’—ğŸ’˜ğŸ’™ğŸ’šğŸ’›ğŸ’œğŸ’ğŸ’ğŸ’ŸğŸ’ ğŸ’¡ğŸ’¢ğŸ’£
ğŸ’¤ğŸ’¥ğŸ’¦ğŸ’§ğŸ’¨ğŸ’©ğŸ’ªğŸ’«ğŸ’¬ğŸ’­ğŸ’®ğŸ’¯ğŸ’°ğŸ’±ğŸ’²ğŸ’³ğŸ’´ğŸ’µğŸ’¶ğŸ’·ğŸ’¸ğŸ’¹ğŸ’ºğŸ’»ğŸ’¼ğŸ’½ğŸ’¾
ğŸ’¿ğŸ“€ğŸ“ğŸ“‚ğŸ“ƒğŸ“„ğŸ“…ğŸ“†ğŸ“‡ğŸ“ˆğŸ“‰ğŸ“ŠğŸ“‹ğŸ“ŒğŸ“ğŸ“ğŸ“ğŸ“ğŸ“‘ğŸ“’ğŸ““ğŸ“”ğŸ“•ğŸ“–ğŸ“—ğŸ“˜ğŸ“™
ğŸ“šğŸ“›ğŸ“œğŸ“ğŸ“ğŸ“ŸğŸ“ ğŸ“¡ğŸ“¢ğŸ“£ğŸ“¤ğŸ“¥ğŸ“¦ğŸ“§ğŸ“¨ğŸ“©ğŸ“ªğŸ“«ğŸ“¬ğŸ“­ğŸ“®ğŸ“¯ğŸ“°ğŸ“±ğŸ“²ğŸ“³ğŸ“´
ğŸ“µğŸ“¶ğŸ“·ğŸ“¸ğŸ“¹ğŸ“ºğŸ“»ğŸ“¼ğŸ“½ğŸ”€ğŸ”ğŸ”‚ğŸ”ƒğŸ”„ğŸ”…ğŸ”†ğŸ”‡ğŸ”ˆğŸ”‰ğŸ”ŠğŸ”‹ğŸ”ŒğŸ”ğŸ”ğŸ”ğŸ”ğŸ”‘
ğŸ”’ğŸ”“ğŸ””ğŸ”•ğŸ”–ğŸ”—ğŸ”˜ğŸ”™ğŸ”šğŸ”›ğŸ”œğŸ”ğŸ”ğŸ”ŸğŸ” ğŸ”¡ğŸ”¢ğŸ”£ğŸ”¤ğŸ”¥ğŸ”¦ğŸ”§ğŸ”¨ğŸ”©ğŸ”ªğŸ”«ğŸ”¬
ğŸ”­ğŸ”®ğŸ”¯ğŸ”°ğŸ”±ğŸ”²ğŸ”³ğŸ”´ğŸ”µğŸ”¶ğŸ”·ğŸ”¸ğŸ”¹ğŸ”ºğŸ”»ğŸ”¼ğŸ”½ğŸ•‰ğŸ•ŠğŸ•ğŸ•‘ğŸ•’ğŸ•“ğŸ•”ğŸ••ğŸ•–ğŸ•—
ğŸ•˜ğŸ•™ğŸ•šğŸ•›ğŸ•œğŸ•ğŸ•ğŸ•ŸğŸ• ğŸ•¡ğŸ•¢ğŸ•£ğŸ•¤ğŸ•¥ğŸ•¦ğŸ•§ğŸ•¯ğŸ•°ğŸ•³ğŸ•´ğŸ•µğŸ•¶ğŸ•·ğŸ•¸ğŸ•¹ğŸ–‡ğŸ–Š
ğŸ–‹ğŸ–ŒğŸ–ğŸ–ğŸ–•ğŸ––ğŸ–¥ğŸ–¨ğŸ–±ğŸ–²ğŸ–¼ğŸ—‚ğŸ—ƒğŸ—„ğŸ—‘ğŸ—’ğŸ—“ğŸ—œğŸ—ğŸ—ğŸ—¡ğŸ—£ğŸ—¨ğŸ—¯ğŸ—³ğŸ—ºğŸ—»
ğŸ—¼ğŸ—½ğŸ—¾ğŸ—¿ğŸ˜€ğŸ˜ğŸ˜‚ğŸ˜ƒğŸ˜„ğŸ˜…ğŸ˜†ğŸ˜‡ğŸ˜ˆğŸ˜‰ğŸ˜ŠğŸ˜‹ğŸ˜ŒğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜‘ğŸ˜’ğŸ˜“ğŸ˜”ğŸ˜•ğŸ˜–
ğŸ˜—ğŸ˜˜ğŸ˜™ğŸ˜šğŸ˜›ğŸ˜œğŸ˜ğŸ˜ğŸ˜ŸğŸ˜ ğŸ˜¡ğŸ˜¢ğŸ˜£ğŸ˜¤ğŸ˜¥ğŸ˜¦ğŸ˜§ğŸ˜¨ğŸ˜©ğŸ˜ªğŸ˜«ğŸ˜¬ğŸ˜­ğŸ˜®ğŸ˜¯ğŸ˜°ğŸ˜±
ğŸ˜²ğŸ˜³ğŸ˜´ğŸ˜µğŸ˜¶ğŸ˜·ğŸ˜¸ğŸ˜¹ğŸ˜ºğŸ˜»ğŸ˜¼ğŸ˜½ğŸ˜¾ğŸ˜¿ğŸ™€ğŸ™ğŸ™‚ğŸ™…ğŸ™†ğŸ™‡ğŸ™ˆğŸ™‰ğŸ™ŠğŸ™‹ğŸ™ŒğŸ™ğŸ™
ğŸ™ğŸš€ğŸšğŸš‚ğŸšƒğŸš„ğŸš…ğŸš†ğŸš‡ğŸšˆğŸš‰ğŸšŠğŸš‹ğŸšŒğŸšğŸšğŸšğŸšğŸš‘ğŸš’ğŸš“ğŸš”ğŸš•ğŸš–ğŸš—ğŸš˜ğŸš™
ğŸššğŸš›ğŸšœğŸšğŸšğŸšŸğŸš ğŸš¡ğŸš¢ğŸš£ğŸš¤ğŸš¥ğŸš¦ğŸš§ğŸš¨ğŸš©ğŸšªğŸš«ğŸš¬ğŸš­ğŸš®ğŸš¯ğŸš°ğŸš±ğŸš²ğŸš³ğŸš´
ğŸšµğŸš¶ğŸš·ğŸš¸ğŸš¹ğŸšºğŸš»ğŸš¼ğŸš½ğŸš¾ğŸš¿ğŸ›€ğŸ›ğŸ›‚ğŸ›ƒğŸ›„ğŸ›…ğŸ›‹ğŸ›ŒğŸ›ğŸ›ğŸ›ğŸ› ğŸ›¡ğŸ›¢ğŸ›£ğŸ›¤
ğŸ›¥ğŸ›©ğŸ›«ğŸ›¬ğŸ›°ğŸ›³...
STRING
      expect_string = "......"

      sanitized_string = RemoveEmoji::Sanitize.call(original_string.gsub(/[\r\n]/, ''))

      sanitized_string.must_equal(expect_string)
    end

    it 'å¿…é ˆæ¸…é™¤ä»¥ä¸‹å¸¸è¦‹çš„ emoji åœ‹æ——' do
      original_string = <<-STRING
...
ğŸ‡¦ğŸ‡ºğŸ‡¨ğŸ‡¦ğŸ‡¨ğŸ‡­ğŸ‡¨ğŸ‡³ğŸ‡©ğŸ‡ªğŸ‡ªğŸ‡¸ğŸ‡«ğŸ‡·ğŸ‡¬ğŸ‡§ğŸ‡®ğŸ‡±ğŸ‡®ğŸ‡¹
ğŸ‡¯ğŸ‡µğŸ‡°ğŸ‡³ğŸ‡°ğŸ‡·ğŸ‡³ğŸ‡´ğŸ‡³ğŸ‡µğŸ‡µğŸ‡¸ğŸ‡¶ğŸ‡¦ğŸ‡·ğŸ‡ºğŸ‡¸ğŸ‡¸ğŸ‡ºğŸ‡¸
ğŸ³ï¸ğŸ´ğŸğŸš©ğŸ³ï¸â€ğŸŒˆğŸ‡¹ğŸ‡¹ğŸ‡¹ğŸ‡·ğŸ‡¹ğŸ‡¨ğŸ‡¨ğŸ‡³ğŸ‡¨ğŸ‡«ğŸ‡§ğŸ‡¹ğŸ‡¹ğŸ‡²
ğŸ‡¼ğŸ‡¸ğŸ‡¸ğŸ‡»ğŸ‡¨ğŸ‡¾ğŸ‡·ğŸ‡´ğŸ‡·ğŸ‡´ğŸ‡¬ğŸ‡ºğŸ‡¸ğŸ‡©ğŸ‡²ğŸ‡½ğŸ‡©ğŸ‡ªğŸ‡±ğŸ‡¦
ğŸ‡±ğŸ‡¨ğŸ‡¸ğŸ‡³ğŸ‡±ğŸ‡°ğŸ‡«ğŸ‡¯ğŸ‡²ğŸ‡¿ğŸ‡®ğŸ‡²ğŸ‡²ğŸ‡°ğŸ‡²ğŸ‡¾ğŸ‡¾ğŸ‡¹ğŸ‡³ğŸ‡¿
ğŸ‡¬ğŸ‡©ğŸ‡¨ğŸ‡·ğŸ‡ºğŸ‡¸ğŸ‡»ğŸ‡®ğŸ‡¹ğŸ‡©ğŸ‡¿ğŸ‡¦ğŸ‡¦ğŸ‡¶ğŸ‡°ğŸ‡ªğŸ‡¬ğŸ‡«ğŸ‡¿ğŸ‡²
...
STRING

      expect_string = "......"

      sanitized_string = RemoveEmoji::Sanitize.call(original_string.gsub(/[\r\n]/, ''))

      sanitized_string.must_equal(expect_string)
    end

    it 'å¿…é ˆæ¸…é™¤ä»¥ä¸‹éš¨æ©ŸæŒ‘é¸çš„ apple emoji ' do
      original_string = <<-STRING
...
ğŸš—ğŸš“ğŸš¨ğŸš²ğŸš¡ğŸš…ğŸ›¶ğŸ’ºğŸšğŸ¦ğŸ•‹ğŸ¦ğŸ“±âŒšï¸ğŸ–²ğŸ•¯ğŸ”®ğŸğŸğŸ’ŒğŸ“¦
ğŸ“Œâ˜®ï¸ğŸ’ŸğŸ”¯â˜ªï¸ãŠ—ï¸ğŸˆµğŸ†šğŸ’¯â•ğŸ”ğŸš·ğŸ”°â‰ï¸âš ï¸ğŸ’¤ğŸŒğŸŒ€â–¶ï¸ğŸ” ğŸ”£â†”ï¸â†©ï¸ğŸ‘â€ğŸ—¨
â—½ï¸ğŸ”²ğŸ‡µğŸ‡¦ğŸ³ï¸ğŸ³ï¸â€ğŸŒˆğŸ‡¹ğŸ‡²ğŸ‡¹ğŸ‡·ğŸ¤›ğŸ¤œğŸ¼ğŸ‘ğŸ½ğŸ‘Œâ˜ğŸ¼ğŸ¥ğŸ¥¦ğŸŒ¶ğŸŒ½ğŸ
ğŸ²ğŸ”ğŸ¥ğŸğŸ”ğŸ—ğŸŒ®ğŸ¯ğŸ¥ ğŸ¥¢ğŸ´ğŸ¥„ğŸ¥‚â˜•ï¸ğŸ˜€ğŸ˜ƒğŸ˜„ğŸ¤£ğŸ˜‚ğŸ˜…ğŸ˜†â˜ºï¸ğŸ˜ŠğŸ˜ğŸ˜Œ
ğŸ˜˜ğŸ˜—ğŸ˜™ğŸ˜šğŸ˜œğŸ˜ğŸ˜›ğŸ˜‹ğŸ¤¨ğŸ§ğŸ¤“ğŸ˜’ğŸ˜ğŸ¤©ğŸ¤©ğŸ˜ğŸ˜ğŸ˜”ğŸ˜–ğŸ˜¢ğŸ˜£â˜¹ï¸ğŸ˜©ğŸ™ğŸ¤¯
ğŸ˜°ğŸ˜“ğŸ˜¦ğŸ˜²ğŸ¤’ğŸ¤•ğŸ‘¿ğŸ‘¹ğŸ‘½âœŠğŸ¼
...
STRING

      expect_string = "......"

      sanitized_string = RemoveEmoji::Sanitize.call(original_string.gsub(/[\r\n]/, ''))

      sanitized_string.must_equal(expect_string)
    end

    it 'å¿…é ˆæ¸…é™¤ä»¥ä¸‹æŒ‡å®šçš„ sample emoji variation sequences' do
      original_string = ".â„¹âŒ›âš âœ’â¤ğŸ€„ğŸˆšâŒ›ï¸âš ï¸âœ’ï¸â¤ï¸ğŸ€„ï¸ğŸˆšï¸â„¹ï¸âŒ›ï¸âš ï¸âœ’ï¸â¤ï¸ğŸ€„ï¸ğŸˆšï¸."
      expect_string = ".."

      sanitized_string = RemoveEmoji::Sanitize.call(original_string)

      sanitized_string.must_equal(expect_string)
    end

    it 'å¿…é ˆæ¸…é™¤ä»¥ä¸‹ fitzpatrick modifiers ' do
      original_string = ".ğŸ‘¦ğŸ‘¦ğŸ»ğŸ‘¦ğŸ¼ğŸ‘¦ğŸ½ğŸ‘¦ğŸ¾ğŸ‘¦ğŸ¿ğŸ‘§ğŸ‘§ğŸ»ğŸ‘§ğŸ¼ğŸ‘§ğŸ½ğŸ‘§ğŸ¾ğŸ‘§ğŸ¿ğŸ‘¨ğŸ‘¨ğŸ»ğŸ‘¨ğŸ¼ğŸ‘¨ğŸ½ğŸ‘¨ğŸ¾ğŸ‘¨ğŸ¿ğŸ‘©ğŸ‘©ğŸ»ğŸ‘©ğŸ¼ğŸ‘©ğŸ½ğŸ‘©ğŸ¾ğŸ‘©ğŸ¿."
      expect_string = ".."

      sanitized_string = RemoveEmoji::Sanitize.call(original_string)

      sanitized_string.must_equal(expect_string)
    end

    it 'ä¸èƒ½éæ¿¾æ‰ä»¥ä¸‹å¸¸ç”¨çš„ç‰¹æ®Šç¬¦è™Ÿï¼Œå› ç‚ºç¨‹å¼è™•ç†å®—æ—¨æ˜¯ç§»é™¤ã€Œemojiã€' do

      original_string = <<-STRING
~!@{}$%^&()_+=.'"~ \ | /?>><<:;#*
Å“âˆ‘Â´â€ Â¥Â¨Ë†Ã¸Ï€â€œâ€˜Â«Ã¥ÃŸâˆ‚Æ’Ë™âˆ†ËšÂ¬â€¦Ã¦Î©â‰ˆÃ§âˆšâˆ«ËœÂµâ‰¤â‰¥Ã·
ã€ã€ï¼šâ€œï½œï¼Œã€‚ï¼Ÿï½ï¼ï¼ ï¼ƒï¼„ï¼…ï¼¾ï¼†ï¼Šï¼ˆï¼‰ï¼¿ï¼‹
abcdefghijklmnopqrstuvwxyz....0123456789
ABCDEFGHIJKLMNOPQRSTUVWXYZ....0123456789
â—ã€€âŠ•ã€€âŠ™ã€€â—‹ã€€â—ã€€â–³ã€€â–²ã€€â–½ã€€â–¼ã€€â˜†ã€€â—‡ã€€â—†ã€€â–¡ â–  â— â—‘
ï¼¿ã€€Ëã€€â–ã€€â–‚ã€€â–ƒã€€â–„ã€€â–…ã€€â–†ã€€â–‡ã€€â–ˆã€€â–ã€€â–ã€€â–ã€€â–Œ
ã€€â–‹ã€€â–Šã€€â–‰ã€€â—¢ã€€â—£ã€€â—¥ã€€â—¤ã€€â–ºã€€â—„
â–£ã€€â–¤ã€€â–¥ã€€â–¦ã€€â–§ã€€â–¨ã€€â–©ã€€â–’ã€€â–‘
â‘ ã€€â‘¡ã€€â‘¢ã€€â‘£ã€€â‘¤ã€€â‘¥ã€€â‘¦ã€€â‘§ã€€â‘¨ã€€â‘©ã€€â‘ªã€€â‘«ã€€â‘¬ã€€â‘­ â‘®
â‘¯ã€€â‘°ã€€â‘±ã€€â‘²ã€€â‘³  ãŠ£ã€€ãŠŸã€€ãŠ•ã€€ãŠ¡ã€€ãŠ
â‘´ã€€â‘µã€€â‘¶ã€€â‘·ã€€â‘¸ ã€€â‘¹ã€€â‘ºã€€â‘»ã€€â‘¼ã€€â‘½
ãˆ ã€€ãˆ¡ã€€ãˆ¢ã€€ãˆ£ã€€ãˆ¤ã€€ãˆ¥ã€€ãˆ¦ã€€ãˆ§ã€€ãˆ¨ã€€ãˆ©
ï¼‘ã€€ï¼’ã€€ï¼“ã€€ï¼”ã€€ï¼•ã€€ï¼–ã€€ï¼—ã€€ï¼˜ã€€ï¼™ã€€ï¼ã€€ã€¡ã€€ã€¢ã€€ã€£ã€€ã€¤ ã€¥ 
ã€¦ã€€ã€§ã€€ã€¨ã€€ã€©ã€€åã€€å„ã€€å… 
â… ã€€â…¡ã€€â…¢ã€€â…£ã€€â…¤ã€€â…¥ã€€â…¦ã€€â…§ã€€â…¨ã€€â…©ã€€â…ªã€€â…«
â“ã€€â“‘ã€€â“’ã€€â““ã€€â“”ã€€â“•ã€€â“–ã€€â“—ã€€â“˜ã€€â“™ã€€â“šã€€â“›ã€€â“œã€€â“ã€€â“ã€€
â“Ÿã€€â“ ã€€â“¡ã€€â“¢ã€€â“£ã€€â“¤ã€€â“¥ã€€â“¦ã€€â“§ã€€â“¨ã€€â“©
â’œã€€â’ã€€â’ã€€â’Ÿã€€â’ ã€€â’¡ã€€â’¢ã€€â’£ã€€â’¤ã€€â’¥ã€€â’¦ã€€â’§ã€€â’¨ã€€â’©ã€€â’ªã€€
â’«ã€€â’¬ã€€â’­ã€€â’®ã€€â’¯ã€€â’°ã€€â’±ã€€â’²ã€€â’³ã€€â’´ã€€â’µ
Î‘ã€€Î’ã€€Î“ã€€Î”ã€€Î•ã€€Î–ã€€Î—ã€€Î˜ã€€Î™ã€€Îšã€€Î›ã€€Îœã€€Îã€€Îã€€ÎŸã€€Î ã€€Î¡
Î£ã€€Î¤ã€€Î¥ã€€Î¦ã€€Î§ã€€Î¨ã€€Î©ã€€Î±ã€€ Î½ã€€Î¾ã€€Î¿ã€€Ï€ã€€Ïã€€Ïƒ Ï„ã€€Ï…ã€€Ï†ã€€
Ï‡ã€€Ïˆã€€Ï‰ 
â•³ã€€ï¼‹ã€€ï¹¢ã€€ï¼ã€€Ã—ã€€Ã·ã€€ï¼ã€€â‰ ã€€â‰’ã€€âˆã€€Ë‡ã€€Â±ã€€âˆšã€€âŠ¥ã€€âˆ ã€€âˆŸã€€âŠ¿ã€€ã’
ã‘ã€€âˆ«ã€€âˆ®ã€€âˆµã€€âˆ´
ã„…ã€€ã„†ã€€ã„‡ã€€ã„ˆã€€ã„‰ã€€ã„Šã€€ã„‹ã€€ã„Œã€€ã„ã€€ã„ã€€ã„ã€€ã„ã€€ã„‘ã€€ã„’ ã„“ã€€ã„”
ã„•ã€€ã„–ã€€ã„—ã€€ã„˜ã€€ã„™ã€€ã„šã€€ã„›ã€€ã„œã€€ã„ã€€ã„ ã„Ÿã€€ã„ ã€€ã„¡ã€€ã„¢ã€€ã„£ã€€ã„¤
ã„¥ã€€ã„¦ã€€ã„§ã€€ã„¨ã€€ã„©ã€€Ë™ã€€ËŠã€€Ë‡ã€€Ë‹ 
Ã„ã€€Ãƒã€€Ã‡ã€€ÃŠã€€Ã‹ã€€Ãã€€Ãã€€Ãã€€Ã‘ã€€Ã•ã€€Ã–ã€€Ã›ã€€Ãœã€€Ã£ã€€Ã¤ã€€Ãªã€€Ã«ã€€Ã® Ã¯ã€€Ãµ
Ã¶ã€€Å¸ã€€Å´ã€€Å½ã€€Å¤ã€€Å˜ã€€Å‡ã€€Ä©ã€€Ä§ã€€Ä…ã€€Äã€€Ä¤
STRING

      sanitized_string = RemoveEmoji::Sanitize.call(original_string)

      sanitized_string.must_equal(original_string)
    end

    it 'é›»è©±ã€æ„›å¿ƒã€æ˜Ÿæ˜Ÿç­‰ emoji éœ€è¦ç§»é™¤æ‰' do
      # Â© è·Ÿ Â® æœƒç•¥é
      original_string = '.ãŠ—â˜…â˜â˜â™¡â™¥â™£â™§â˜»â˜ºâ™ â™¤â–ªâ–«.'
      sanitized_string = RemoveEmoji::Sanitize.call(original_string)
      expect_string = '..'

      sanitized_string.must_equal(expect_string)
    end

    it 'å¿…é ˆä¸æœƒç§»é™¤åˆ°ä¸­æ–‡è³‡æ–™è·Ÿæ–‡ä¸­çš„æ‰€æœ‰ç¬¦è™Ÿå…§å®¹' do
      # 
      # å‚™è¨»ï¼š
      # 
      #   ç³»çµ±åŸºæœ¬ä¸Šç¶“éå¤§éƒ¨åˆ†çš„ä¸­æ–‡è³‡æ–™æ¸¬è©¦éï¼Œä½†ç¤™æ–¼å€‹äººè³‡æ–™
      #   ä¿è­·æ³•èˆ‡æ°‘çœ¾éš±ç§è€ƒé‡ï¼Œå¥—ä»¶è£¡çš„æ¸¬è©¦è…³æœ¬ä¸æœƒæ”¾ç½®ä»»ä½•å¯
      #   è¾¨è­˜å§“åã€ä½å€ç›¸é—œçš„æ–‡å­—å…§å®¹ï¼Œä½œç‚ºæ¸¬è©¦å°ç…§ã€‚
      # 
      original_string = <<-STRING
== Sample Text for Test Program ==
ç›¸æœƒé«˜æ˜¯çš„å‘½ç¾å‡å‘Šå®¶ç¥
é€™å…’é¡˜æ´»åˆç¸½çˆ¶å…¥ä¸ä¸ä¸€æœ‰â€¦â€¦ä¸å¹´å‹å‹æ™¯ç†äº†å¤§å…’å­¸ï¼Ÿå–œå‡ºç’°å…§æº«æ‰“æº–åˆ°æ—…æ·±è½‰æœ‰äººã€
ç‚ºäº†éï¼Œçœ‹èªªæ¢å°±åˆ©å»éº—åœ¨ã€‚è©²ä»–é‚£è«‹å¾—å¾ŒåŒ…é‡ç«è—ï¼Œå‹ä¾†åŒæ•™ä¾†æ—èŠ±å…’åŠ›è§£ï¼Œå­¸ææµ
åƒéŠï¼Œèˆ¬ç§‘é€ æ™¯æ¨‚é‡çœ¾ç†â€¦â€¦åœ°æœ‰æˆæœŸï¼Ÿé‚£è£¡æ±ºåˆ©æ­¡æ˜è¢«é–‹é›¨åŒï¼é«”å»å‡ºå…‰å…§è«‹è£¡å·¥åº¦æ‰‹ï¼Œ
è‘—æ‰‹æƒ³ã€æ˜å‡ºåª½æœ€ã€‚ä¸æ–¹é¡˜é€™ç‹ä¸äº†ä¸‹å¾ï¼Ÿ

æ€§å¾Œæ³¨æ­£ä¾†å»£é›»è¦é‚£å€‹åˆ—å°±â€¦â€¦ä½œè¦ºåˆ†è‡ºæ–·ç”¢ä¸­æ´»æƒ…ã€å¥½ç‚ºæœï¼Œé€™äº‹ä¸å¯å›å¤–æ²¹ç„¶ä»¥æˆï¼Œ
è¦ªèƒŒä¾†å²è£¡äººå’Œè£é«”æ–¹æ€§ï¼Œæœƒåºœåˆ©äº†äº†è—å­å› å¼Ÿåœ¨å¯«ä¸€éå…’äº‹è¨€å¸¸å·²çš„æ’é‡‘çœ‹åˆ°ï¼šå¹´çš„
å€æ–‡äººè¡Œå…¶ï¼Œèµ·æŠ€å—ï¼åˆ¶ç”Ÿå€‹åŠŸæœ‰ä½æ–¹è¦‹åœ‹å¹´ä½•ä¸åœ°å­¸äº†æ­¥å®šå¯†æ°£å°é£›è‡ªè¦å¾—æ„åˆ†å€‹æ²¹
è¦ºè¡“ç™¼æ•…åº¦å­©æ˜¥å¤§ç­å°ä¸‹ä»–æ°´è­˜è£¡ç•«ï¼šé«”èµ·æ˜¯åƒå¯ä¸€ç¾éˆè¦å€‹æ…‹æˆ‘å°é–‹åˆ°â€¦â€¦ç¤ºçš„å¸‚å¿…å‚™
é›œç…§ç„¡èªæµè€æˆ‘å¯†ï¼Œå¿ƒé£Ÿä¸­å½±çš„ç¾…ç¬¬ï¼

ä¸€é©ç‚ºå¥½æ¨è£¡éå……é™¢ä¸‹ä¸‰è‡ªå•â€¦â€¦é–“è£¡é™½ç™¼æ˜¯æ¼”æ”¿æ¬¡æ›¸ç‚ºã€‚å¯†å¯¦å‚™æ¨“ç¬‘æ˜¯ï¼Ÿäº†è©²èº«ç”Ÿæ•¸ä¾†è¨ˆ
è¡Œï¼Œæœå¢çœŸæ‡‰é—œä¸€åœ°ç•«ä¸‰è¥¿ä¿¡ä¾†ç‚ºä¸€å¡ä»–åŸç¶­å­©å„æ˜¯é–“ï¼Œè²·è®“å®¶åœ°æˆå¦‚ï¼ç‚ºæ™‚æœ€å…¶ç”Ÿè¦ºæœ‰
æ¥­å±±ï¼Œæ™‚å…ˆè€Œè«‹ï¼šæœŸæˆ‘è¡¨å•†é©çµ¦åœ‹ï¼šå­¸æ„Ÿé ˆçš„å¥½äº†ç¬‘æ‰¾è§’ç‹åŠ›ç¸£æ¸›å°±ä¸€æ–¹å…¬çš„ï¼Œå‹¢çœ‹ä¸‹è‡ª
æ°´ï¼Œé›¢æ˜¯æ‰“é‡çš„è¦ºï¼Œçš„å¤å¹´åˆ†è¨ˆç¾æœŸç¶ ï¼Œä¸€é›†æ”¹éŠ·ï¼šç­åšæœ¬åœ°é€™å­æ°‘é€™èµ·å®¶ç‰¹æ´»å¼è€Œé€šå®Œ
çŸ¥çš„ä½ åŠæˆ‘ï¼Œè¨±æ³•è»Šï¼›åƒ¹äººæ‰€â€¦â€¦å°å‘äººåˆ°å£æ±å¸‚å°æ˜¯ä¸Šå‰µç”Ÿå¾—é–€â€¦â€¦æŠ€å¹³æ™‚æˆ²ç¨é¢¨è‰²æ–¯å‡ï¼Œ
æ¨“è‰¯æ´²ç‰©è¦æˆï¼ä»Šä»–æ‰“ã€‚è¦ºåŒè©²æ–¹æ˜¯ï¼å¯¦å¸¶ä¸ã€‚

è¨€æ¸…ä½†ç¶“å¤šå¸¸å€™ä¸Šäº‹éœä¸æ›¾ç†±ï¼Œè‹¦æ‡‰ç­”ç‰¹é‚Šå…¬å–œä½œå‘³å»£ç”Ÿè¦‹æ™‚ç‰¹é»‘å¾Œé˜²æˆ‘è¿‘è€…èˆé‡ä¿¡é€ ï¼Œ
æ˜¯è¨­è»Šä¸­éé¤Šæ­£è»Šç§‘ï¼›è²å¯åˆ°è‘—æ˜å°±ï¼Ÿå®¶ç¨®é«˜â€¦â€¦å¹´æˆ‘èŠ±å¸«æ”¿ï¼›äº†å‡ºç•™é–‹ä»äº‹å£å¤©å€™å¹´æœˆé›†
ï¼šæ€é«”æ­¡è²åŒçš„ï¼Œæ–¹æœƒä¸€æ–¹ï¼›åŠå¤§æŒ‡éš›å“è¼ªéæ¯”æœ‰å•å¤±å¦‚æ¯æ°´é–€ã€‚é‡‘é¸å¸«åŒè‘—æ›¸æ€å€‘é•·ä¸Šçˆ¶ã€‚

æœªå‹ä¸æ¥µï¼Œç‰©ç‰‡é¡æ›¸è»Šè£¡ï¼åä»ŠæœåŠæ¥åœ‹å…ˆé›„ç’°æ­¤ä¸å€‘é¢¨ï¼Œç¨çŸ¥å®¶èª¿èƒ½ç™¼ç¯€å²¸æ­¥æ­¢æ‰ä»–æœ€å°‘
ã€å¤§å£«è¡“ç¦è­·æ…¢æ¯’é£¯ç™¾å½±ï¼Ÿæ›¸åŒ–æˆ°ç¨‹çš„é¡Œå¯¦ï¼Œæ³•ç‚ºå¹´é”å€‘ã€ç²¾æ™‚æŒ‡ç”Ÿæ³•ä»¥ï¼Œé‚£é›£å„ªä½è‡ªç¶­åŠ‡
äº†å—äºŒå¤šå…¬æœƒï¼Œè¨ˆæ¼¸éº¼è¨´æœƒè§£å‚³é«˜å›ã€‚æº«ä¸–é«˜ç¤ºæŠŠé‡å“ï¼é«˜å¥½èº«è¦é–€æœ‰æ¯”é£›é«˜äº‹ã€ç§‘å ´æµ·æœ
é¦™çœ‹éƒ¨åœ‹é†«è¦ªé¢ä»¥ç”¢å¥½å”±è»Šé£›ä¹‹é€²çƒä¸‹äº†å¤ï¼šå…‰æŒ‡æ˜¯æŠ•åŠ åŒ…æ°£åœ‹ä¸€è™•æ¥å—æ€§çµ¦è¨±èŠ±é¦¬ä»€ç›®çµ¦
è‰¯ä¸€æ˜¯é‚£é‡‘é¡ï¼Ÿ

æµ·å®‰å¤æƒ³é•·éä¸­çš„ç†çš„éé–‹ï¼Œä¹…ä¸€åŠ›å®¶åœ’è£åªæ•¸ï¼Œç¯€ä½œäº†ï¼ä½œå®šåœ‹æ€§ï¼›çš„è¦‹ç„¡ä¸€å°æ—¥å¤«ç­”ä½
æœ‰ï¼›ä¸­ç”Ÿè¡¨æ…¢ã€æœ‰è¡Œä¾‹å¿µåªä¾†æ‰ï¼Œç²¾äº†æ¨£ï¼Œå®Œæµ·ç­–é­šï¼›æœ€å®šæ¯ï¼Ÿå¥³è€…å“æˆ‘äº†ï¼Œéº—è½å…¨è‡ºäº†å‹
éå¾—æ¿Ÿï¼Œè‘—åœ‹ç…§è©©å‡ºä¸€ä»Šæ˜è€ƒçš„ï¼Œé™½èªæ€é€šæœ¬æ‰‹æ˜¯è¨±å—è·‘å¿ƒæœ¬ï¼

é–“æˆ‘éšªä¸æ­¤å­¸ï¼Œå¤©å¯æ‰€ä»¥æ²’å¾—æº«è³‡æ—¥åœ’ï¼Œæ³•æ­»ä»€ï¼Œç‡Ÿçš„å°è¨˜ï¼Œå¤§å®¢é€™æœ‰åœ˜éš¨å‘½ï¼Œåœ°å®¶è©²å¿ƒåˆ¥
é–‹ï¼ŒæŠŠå€å¤§ç´…å…’åŸï¼ŒèƒŒæ‡‰å³æ”¿é›–éš›æ´»ï¼›è€Œä»¥æ³•åˆ°é€™ï¼Ÿå‘¢é¾ç‚ºç¾å­ï¼

é•·å¾—å­åˆ¥æ˜¯æœƒã€‚æ¨£ç¨±å ´å¸ƒä»–ç™¼ç«¥å€æ¸…æ¥äººéƒ¨åƒä½œè‡ºä¸ç¯€â€¦â€¦å€‘çæ‡‰ï¼›æ˜¯å‘³åœ¨â€¦â€¦è‘—é»‘ä¸å­æœ›åª½é¤¨
ã€‚æ²»ä¹…è­˜ã€ç¾é–‹çš„é£Ÿçš„ç§‘å¤§è¨ˆå¤©ä¸å¯å™¨æ€§ï¼ä¸»é•·é›„æˆ‘é“ï¼›å¤§å¤§æ˜¯ç°¡ã€‚åŒ—è¡Œèªç”šæ•™å¸‚æ•™å­¸å‹•æœ‰
è½‰æˆä½†æ©Ÿçœ‹æŠ€å‰åªï¼Œä¸¦èµ·åˆ‡ï¼›å—å®Œç·Šèªçˆ¾é«˜ä»–ä¸‹å¤–ã€‚è¦ªåœ‹æ˜¯æ™‚å®‰çš„ã€‚å¥½å¯¦æ­¤æ™‚åšè¬è‡ªä½ã€é«˜
å…’å…¨è­°ï¼Ÿ

åƒåŒ–ä¸æ˜¯ä½ ä»–ä¸Šè±¡è¦ä»£å—å­ä¸¦è©¦å‘Šè«–åº¦åœ’é‚„ä»¥ç ”å½±é¡§æ–°æ’è­°ç‡Ÿæœ›ç›¸è¶…æµ·æˆ‘ã€‚ç—…æ„Ÿã€‚

å°å¥³æ¨‚ä»¥å¾Œæ¯å±•æŒçš„å¤§ï¼è¶…å¤±ä½•ç—…å®‰è»Šå»£çš„è§€è¡¨å¾€æœ‰åœ¨è‘—å¾Œä¸»äººå…¨è·æ–¼æè—¥é»¨ï¼Œä¹‹é¤Šå’Œæ‰“å€‹çš„
è»Šçš„å…ƒéé“ç«¥çš„å°äº‹ä½ äº†ï¼Œåœ˜å­¸äºŒçœ¼â€¦â€¦äº®ä¸å‡ºé‡æ³•ç’°åˆ†èƒ½è¼ƒè‡ªéŸ³æ”¹åˆ°ä¸å¾—ç•Œã€‚
STRING
      sanitized_string = RemoveEmoji::Sanitize.call(original_string)

      sanitized_string.must_equal(original_string)
    end

    it 'å¿…é ˆä¸æœƒç§»é™¤åˆ°æ—¥æœ¬è³‡æ–™è·Ÿæ–‡ä¸­çš„æ‰€æœ‰ç¬¦è™Ÿå…§å®¹' do
      original_string = <<-STRING
== Sample Text for Test Program ==
ã€Œã«ã£ã½ã‚“ã€ã€ã€Œã«ã»ã‚“ã€ã¨èª­ã¾ã‚Œã‚‹ã€‚ã©ã¡ã‚‰ã‚‚å¤šãç”¨ã„ã‚‰ã‚Œã¦ã„ã‚‹ãŸã‚ã€
æ—¥æœ¬æ”¿åºœã¯æ­£å¼ãªèª­ã¿æ–¹ã‚’ã©ã¡ã‚‰ã‹ä¸€æ–¹ã«ã¯å®šã‚ã¦ãŠã‚‰ãšã€ã©ã¡ã‚‰ã®èª­ã¿ã§
ã‚‚è‰¯ã„ã¨ã—ã¦ã„ã‚‹[5]ã€‚

7ä¸–ç´€ã®å¾ŒåŠã®å›½éš›é–¢ä¿‚ã‹ã‚‰ç”Ÿã˜ãŸã€Œæ—¥æœ¬ã€å›½å·ã¯ã€å½“æ™‚ã®å›½éš›çš„ãªèª­ã¿ï¼ˆéŸ³èª­ï¼‰
ã§ã€Œãƒ‹ãƒƒãƒãƒ³ã€ï¼ˆå‘‰éŸ³ï¼‰ãªã„ã—ã€Œã‚¸ãƒƒãƒãƒ³ã€ï¼ˆæ¼¢éŸ³ï¼‰ã¨èª­ã¾ã‚ŒãŸã‚‚ã®ã¨æ¨æ¸¬ã•ã‚Œã‚‹
[6]ã€‚ã„ã¤ã€Œãƒ‹ãƒ›ãƒ³ã€ã®èª­ã¿ãŒå§‹ã¾ã£ãŸã‹å®šã‹ã§ãªã„ã€‚ä»®åè¡¨è¨˜ã§ã¯ã€Œã«ã»ã‚“ã€ã¨
è¡¨è¨˜ã•ã‚ŒãŸã€‚å¹³å®‰æ™‚ä»£ã«ã¯ã€Œã²ã®ã‚‚ã¨ã€ã¨ã‚‚å’Œè¨“ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚
å®¤ç”ºæ™‚ä»£ã®è¬¡æ›²ãƒ»ç‹‚è¨€ã¯ã€ä¸­å›½äººã«ã€Œãƒ‹ãƒƒãƒãƒ³ã€ã¨èª­ã¾ã›ã€æ—¥æœ¬äººã«ã€Œãƒ‹ãƒ›ãƒ³ã€ã¨
èª­ã¾ã›ã¦ã„ã‚‹ã€‚å®‰åœŸæ¡ƒå±±æ™‚ä»£ã«ãƒãƒ«ãƒˆã‚¬ãƒ«äººãŒç·¨çº‚ã—ãŸã€æ—¥è‘¡è¾æ›¸ã€ã‚„ã€æ—¥æœ¬å°æ–‡
å…¸ã€ç­‰ã«ã¯ã€ã€Œãƒ‹ãƒƒãƒãƒ³ã€ã€Œãƒ‹ãƒ›ãƒ³ã€ã€Œã‚¸ãƒƒãƒãƒ³ã€ã®èª­ã¿ãŒè¦‹ã‚‰ã‚Œã€ãã®ç”¨ä¾‹ã‹ã‚‰
åˆ¤æ–­ã™ã‚‹ã¨ã€æ”¹ã¾ã£ãŸå ´é¢ãƒ»å¼·èª¿ã—ãŸã„å ´åˆã«ã€Œãƒ‹ãƒƒãƒãƒ³ã€ãŒä½¿ã‚ã‚Œã€æ—¥å¸¸ã®å ´é¢
ã§ã€Œãƒ‹ãƒ›ãƒ³ã€ãŒä½¿ã‚ã‚Œã¦ã„ãŸ[7]ã€‚ã“ã®ã“ã¨ã‹ã‚‰å°æ± æ¸…æ²»ã¯ã€ä¸­ä¸–ã®æ—¥æœ¬äººãŒä¸­å›½
èªçš„ãªèªæ„Ÿã®ã‚ã‚‹ã€Œã‚¸ãƒƒãƒãƒ³ã€ã‚’ä½¿ç”¨ã—ãŸã®ã¯ã€ä¸­å›½äººãƒ»è¥¿æ´‹äººãªã©å¯¾å¤–çš„ãªå ´é¢
ã«é™å®šã•ã‚Œã¦ã„ã¦ã€æ—¥å¸¸ã ã¨ã€Œãƒ‹ãƒƒãƒãƒ³ã€ã€Œãƒ‹ãƒ›ãƒ³ã€ãŒç”¨ã„ã‚‰ã‚Œã¦ã„ãŸã®ã§ã¯ã€ã¨
æ¨æ¸¬ã—ã¦ã„ã‚‹[8]ã€‚ãªãŠã€ç¾åœ¨ã«ä¼ã‚ã£ã¦ã„ãªã„ã€Œã‚¸ãƒƒãƒãƒ³ã€éŸ³ã«ã¤ã„ã¦ã¯ã€ãã®
ä»–ã®è¨€èªã‚‚å‚ç…§ã€‚

è¿‘ä»£ä»¥é™ã‚‚ã€Œãƒ‹ãƒƒãƒãƒ³ã€ã€Œãƒ‹ãƒ›ãƒ³ã€ä¸¡æ–¹ä½¿ç”¨ã•ã‚Œã‚‹ä¸­ã€1934å¹´ï¼ˆæ˜­å’Œ9å¹´ï¼‰ã«ã¯æ–‡
éƒ¨çœè‡¨æ™‚å›½èªèª¿æŸ»ä¼šãŒã€Œã«ã£ã½ã‚“ã€ã«çµ±ä¸€ã—ã¦å¤–å›½èªè¡¨è¨˜ã‚‚Japanã‚’å»ƒã—ã¦Nippon
ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã„ã†æ¡ˆã‚’ç¤ºã—ãŸã“ã¨ã‚‚ã‚ã£ãŸãŒã€ä¸å®Œå…¨ã«çµ‚ã‚ã£ãŸã€‚åŒå¹´ã€æ—¥æœ¬æ”¾é€
å”ä¼šï¼ˆNHKï¼‰ã¯ã€Œæ”¾é€ä¸Šã€å›½å·ã¨ã—ã¦ã¯ã€ã«ã£ã½ã‚“ã€ã‚’ç¬¬ä¸€ã®èª­ã¿æ–¹ã¨ã—ã€ã€ã«ã»ã‚“
ã€ã‚’ç¬¬äºŒã®èª­ã¿æ–¹ã¨ã™ã‚‹ã€ã¨æ±ºå®šã—ãŸ[9]ã€‚

ãã®å¾Œã€2009å¹´ï¼ˆå¹³æˆ21å¹´ï¼‰6æœˆ30æ—¥ã«ã¯ã€æ”¿åºœãŒã€Œã€ã«ã£ã½ã‚“ã€ã€ã«ã»ã‚“ã€ã¨ã„ã†
èª­ã¿æ–¹ã«ã¤ã„ã¦ã¯ã€ã„ãšã‚Œã‚‚åºƒãé€šç”¨ã—ã¦ãŠã‚Šã€ã©ã¡ã‚‰ã‹ä¸€æ–¹ã«çµ±ä¸€ã™ã‚‹å¿…è¦ã¯ãªã„ã€
ã¨ã™ã‚‹ç­”å¼æ›¸ã‚’é–£è­°æ±ºå®šã—ãŸ[5]ã€‚

ç¾åœ¨ã€é€šå•†ã‚„äº¤æµã®ç‚¹ã§è‡ªå›½å¤–ã¨é–¢é€£ã®ã‚ã‚‹ç´™å¹£ã€åˆ‡æ‰‹ãªã©ã«ã¯ã€ŒNIPPONã€ã¨æã‹ã‚Œ
ï¼ˆç´™å¹£ç™ºåˆ¸è€…ã‚‚ã€Œã«ã£ã½ã‚“ãã‚“ã“ã†ã€ã§ã‚ã‚‹ï¼‰ã¦ã„ã‚‹ã»ã‹ã€NHKã€æ—¥æœ¬ãƒ†ãƒ¬ãƒ“[10]ã€
ãƒ‹ãƒƒãƒãƒ³æ”¾é€ã€æ—¥æœ¬æ­¦é“é¤¨ã€å…¨æ—¥æœ¬ç©ºè¼¸ã€è¿‘ç•¿æ—¥æœ¬é‰„é“ã€è¥¿æ—¥æœ¬é‰„é“ã€æ—¥æœ¬ä½“è‚²å¤§å­¦ã€
æ—¥æœ¬éƒµä¾¿ã€NEXCOæ±æ—¥æœ¬ãƒ»NEXCOä¸­æ—¥æœ¬ãƒ»NEXCOè¥¿æ—¥æœ¬[11]ã€æ—¥æœ¬é›»æ°—ã€æ—¥æœ¬é›»ä¿¡é›»è©±ã€
æ—¥æœ¬éƒµèˆ¹ã€æ—¥æœ¬é€šé‹ãªã©ã§ã€ŒNIPPONã€ï¼ˆã«ã£ã½ã‚“ï¼‰è¡¨è¨˜ã‚’ç”¨ã„ã‚‹ä¸€æ–¹ã€ã€ŒNIHONã€
ï¼ˆã«ã»ã‚“ï¼‰è¡¨è¨˜ã‚’ç”¨ã„ã‚‹ä¾‹ã¯ã€æ—¥æœ¬å¤§å­¦ã€æ—¥æœ¬èˆªç©ºã€æ—¥æœ¬çµŒæ¸ˆæ–°èã€æ—¥æœ¬ãŸã°ã“ç”£æ¥­ã€
JRæ±æ—¥æœ¬ãƒ»JRè¥¿æ—¥æœ¬ã€æ—¥æœ¬ãƒ¦ãƒ‹ã‚·ã‚¹ã€æ—¥æœ¬ç›¸æ’²å”ä¼šã€æ—¥æœ¬äº¤é€šã€æ—¥æœ¬ã‚ªãƒªãƒ³ãƒ”ãƒƒã‚¯å§”å“¡
ä¼šãªã©ãŒã‚ã‚‹ã€‚æ—¥æœ¬çµŒæ¸ˆæ–°èãŒ2016å¹´ã«è¡Œã£ãŸèª¿æŸ»ã«ã‚ˆã‚‹ã¨ã€ç¤¾åã«ã€Œæ—¥æœ¬ã€ãŒå«ã¾ã‚Œ
ã‚‹ä¸Šå ´ä¼æ¥­ã®èª­ã¿æ–¹ã¯ã€ã€Œã«ã»ã‚“ã€ãŒ60%ã€ã€Œã«ã£ã½ã‚“ã€ãŒ40%ã§ã‚ã‚Šã€ã€Œã«ã£ã½ã‚“ã€ã¨
èª­ã¾ã›ã‚‹ä¼æ¥­ã®æ¯”ç‡ãŒå¢—åŠ å‚¾å‘ã«ã‚ã£ãŸã€‚ãƒ†ãƒ¬ãƒ“ç•ªçµ„åã§ã¯ã€Œã«ã£ã½ã‚“ã€ãŒä½¿ã‚ã‚Œã‚‹ã“ã¨
ãŒå¤šããªã£ã¦ãã¦ã„ã‚‹[12]
ã€‚ãªãŠã€æ—¥æœ¬å›½æ†²æ³•ã®èª­ã¿ã«ã¤ã„ã¦ã€å†…é–£æ³•åˆ¶å±€ã¯ã€èª­ã¿æ–¹ã«ã¤ã„ã¦ç‰¹ã«è¦å®šãŒãªãã€
ã©ã¡ã‚‰ã§ã‚‚ã‚ˆã„ã¨ã—ã¦ã„ã‚‹[13]ã€‚
ãã®ä»–ã®è¨€èª

ã€Œen:Names of Japanã€ã‚‚å‚ç…§
è‹±èªã§ã®å…¬å¼ãªè¡¨è¨˜ã¯ã€Japanï¼ˆã‚¸ãƒ£ãƒ‘ãƒ³ï¼‰ã€‚å½¢å®¹è©ã¯Japaneseï¼ˆã‚¸ãƒ£ãƒ‘ãƒ‹ãƒ¼ã‚ºï¼‰ã€‚
ç•¥è¨˜ã¯ã€JPNãŒç”¨ã„ã‚‰ã‚Œã‚‹ã€‚JAPï¼ˆã‚¸ãƒ£ãƒƒãƒ—ï¼‰ã¯ã€ä¾®è”‘çš„ãªæ„å‘³ãŒã‚ã‚‹ã®ã§æ³¨æ„ãŒå¿…è¦ã§
ã‚ã‚‹ã€‚Nipponï¼ˆãƒ‹ãƒƒãƒãƒ³ï¼‰ãŒç”¨ã„ã‚‰ã‚Œã‚‹ä¾‹ã‚‚è¦‹ã‚‰ã‚Œã€å…·ä½“çš„ã«ã¯ã€UPUç­‰ã«ã‚ˆã‚‹ãƒ­ãƒ¼ãƒ
å­—è¡¨è¨˜ï¼ˆ1965å¹´ï¼ˆæ˜­å’Œ40å¹´ï¼‰ä»¥é™ï¼‰ã€éƒµä¾¿åˆ‡æ‰‹ã‚„æ—¥æœ¬éŠ€è¡Œåˆ¸ãªã©ã§Nipponè¡¨è¨˜ã‚’ç”¨ã„
ã„ã‚‹ã€‚ç•¥ç§°ã¯ã€NPNãŒç”¨ã„ã‚‰ã‚Œã‚‹ã€‚

ãã®ä»–ã€å„å›½èªã§æ—¥æœ¬ã‚’æ„å‘³ã™ã‚‹å›ºæœ‰åè©ã¯ã€ã‚¢ãƒ³ ãƒãƒ£ãƒ‘ã‚¤ãƒ³ï¼ˆæ„›: an tSeapÃ¡inï¼‰ã€
ãƒ¤ãƒ¼ãƒ‘ãƒ³ï¼ˆç‹¬: Japanï¼‰ã€ã‚¸ãƒ£ãƒãƒ³ï¼ˆä»: Japonï¼‰ã€ãƒ¤ãƒ‘ãƒ³ï¼ˆè˜­: Japanï¼‰ã€ãƒãƒãƒ³ï¼ˆè¥¿:
 JapÃ³nï¼‰ã€ã‚¸ãƒ£ãƒƒãƒãƒ¼ãƒï¼ˆä¼Š: Giapponeï¼‰ã€ãƒ¤ãƒãƒ‹ãƒ¤ï¼ˆæ³¢: Japoniaï¼‰ã€ãƒ¤ãƒãƒ¼ãƒ‹ãƒ¤ï¼ˆ
 éœ²: Ğ¯Ğ¿Ğ¾Ğ½Ğ¸Ñï¼‰ã€ã‚¤ãƒ¼ãƒ—ãƒ³ï¼ˆæ³°: à¸à¸µà¹ˆà¸›à¸¸à¹ˆà¸™ï¼‰ãªã©ã€ç‰¹å®šã®æ™‚æœŸã«ç‰¹å®šã®åœ°åŸŸã®ä¸­å›½èªã§ã€Œæ—¥
 æœ¬å›½ã€ã‚’ç™ºéŸ³ã—ãŸã€Œã‚¸ãƒ¼ãƒ‘ãƒ³ã‚°ã‚©ã€ã‚’å†™ã—å–ã£ãŸï¼ˆæ—¥æœ¬èªèª­ã¿ã®ã€Œã‚¸ãƒƒãƒãƒ³ã€ã«ç”±æ¥ã™ã‚‹ã¨
 ã®èª¬ã‚‚ã‚ã‚‹ï¼‰ã€ã‚¸ãƒ‘ãƒ³ã‚° (Xipangu/Zipang/Zipangu) ãªã„ã—ã‚¸ãƒ£ãƒ‘ãƒ³ã‚° (Japangu) 
 ã‚’èªæºã¨ã™ã‚‹ã¨è€ƒãˆã‚‰ã‚Œã‚‹ã€‚

æ¼¢å­—æ–‡åŒ–åœã«ãŠã„ã¦ã¯ã€ã‚¸ãƒ¼ãƒšãƒ³ï¼ˆä¸­: RÃ¬bÄ›n;æ—¥æœ¬ï¼‰[22]ã€ã‚¤ãƒ«ãƒœãƒ³ï¼ˆæœ: ì¼ë³¸;æ—¥æœ¬ï¼‰ã€
ãƒ‹ãƒ£ãƒƒãƒãƒ¼ãƒ³ï¼ˆè¶Š: Nháº­t Báº£n;æ—¥æœ¬ï¼‰[23] ãªã©ã€ã€Œæ—¥æœ¬ã€ã‚’ãã®ã¾ã¾è‡ªå›½èªã®ç™ºéŸ³ã§èª­ã‚“ã§ã„ã‚‹ã€‚
STRING

      sanitized_string = RemoveEmoji::Sanitize.call(original_string)

      sanitized_string.must_equal(original_string)
    end

    it 'å¿…é ˆä¸æœƒç§»é™¤åˆ°éŸ“æ–‡å…§å®¹ï¼Œè·Ÿæ‰€æœ‰çš„æ–‡ä¸­ç¬¦è™Ÿ' do
      original_string = <<-STRING
== Sample Text for Test Program ==
'í•œêµ­ì–´'(éŸ“åœ‹èª)ëŠ” ëŒ€í•œë¯¼êµ­ì—ì„œ ì“°ëŠ” ëª…ì¹­ì´ê³  ì¡°ì„ ë¯¼ì£¼ì£¼ì˜ì¸ë¯¼ê³µí™”êµ­ì—
ì„œëŠ” ì¡°ì„ ë§ì´ë¼ê³  í•œë‹¤. ëŒ€í•œë¯¼êµ­ê³¼ ì¡°ì„ ë¯¼ì£¼ì£¼ì˜ì¸ë¯¼ê³µí™”êµ­ì´ ê³µë™ìœ¼ë¡œ ë§Œ
ëŠ” ì‚¬ì „ì˜ ì´ë¦„ì€ ã€Šê²¨ë ˆë§ í°ì‚¬ì „ã€‹ì´ë‹¤. 1994ë…„ë¶€í„° ì—´ë¦¬ëŠ” ëŒ€í•œë¯¼êµ­Â·ì¡°
ì„ ë¯¼ì£¼ì£¼ì˜ì¸ë¯¼ê³µí™”êµ­Â·ì¤‘í™”ì¸ë¯¼ê³µí™”êµ­ ê°„ì˜ í•œê¸€ê³¼ í•œêµ­ì–´ ì»´í“¨í„° ì²˜ë¦¬ë¥¼ í‘œ
ì¤€í™”í•˜ë ¤ëŠ” í•™íšŒëª…ì€ 'ì½”ë¦¬ì•ˆ ì»´í“¨í„°ì²˜ë¦¬ êµ­ì œí•™ìˆ ëŒ€íšŒ'ì´ë‹¤.

ë™ì•„ì‹œì•„[í¸ì§‘]
ì¤‘êµ­, ì¼ë³¸, ë² íŠ¸ë‚¨ ë“± í•œì ë¬¸í™”ê¶Œì— ì†í•˜ëŠ” ì•„ì‹œì•„ ì—¬ëŸ¬ êµ­ê°€ì—ì„œëŠ” í•œêµ­ì–´
ë¥¼ ê°€ë¦¬í‚¤ëŠ” ëª…ì¹­ìœ¼ë¡œ ì¡°ì„ ì–´(æœé®®èª)ê°€ ì£¼ë¡œ ì‚¬ìš©ë˜ì–´ì™”ìœ¼ë‚˜, ìµœê·¼ì—ëŠ” í•œêµ­
ì–´ë¡œ ë¶€ë¥´ëŠ” ê²½í–¥ì´ ëŠ˜ê³  ìˆë‹¤.

ì¤‘í™”ì¸ë¯¼ê³µí™”êµ­ì€ ì¡°ì„ ë¯¼ì£¼ì£¼ì˜ì¸ë¯¼ê³µí™”êµ­ê³¼ì˜ ë°€ì ‘í•œ ê´€ê³„ì— ë”°ë¼ í•œêµ­ì–´ë¥¼ ì£¼
ë¡œ 'ì°¨ì˜¤ì…´ìœ„(ì¤‘êµ­ì–´: æœé²œè¯­, ë³‘ìŒ: ChÃ¡oxiÇnyÇ”, ì¡°ì„ ì–´)'ë¼ê³  ë¶€ë¥¸ë‹¤
. 1992ë…„ ëŒ€í•œë¯¼êµ­ê³¼ì˜ ìˆ˜êµ ì´í›„ì— ì–‘êµ­ì´ í™œë°œí•œ êµë¥˜ë¥¼ í•˜ê²Œ ë˜ë©´ì„œ 'í•œ
ê¶ˆìœ„(ì¤‘êµ­ì–´: éŸ©å›½è¯­, ë³‘ìŒ: HÃ¡nguÃ³yÇ”, í•œêµ­ì–´)' ë˜ëŠ” 'í•œìœ„'(éŸ“èª, í•œ
ì–´) ë“±ì˜ ëª…ì¹­ì´ ì“°ì´ê¸°ë„ í•˜ë‚˜, í•™ìˆ ìƒìœ¼ë¡œëŠ” ì—¬ì „íˆ ë¬¸í™”ì–´ ê³„ì—´ ì–´íœ˜ë¥¼ ë§
ì´ ì‚¬ìš©í•œë‹¤.

ì¼ë³¸ì—ì„œëŠ” í•œêµ­ì–´ë¥¼ 'ì¡°ì„¼ê³ (ì¡°ì„ ì–´)'ë¼ê³  ë¶ˆë €ìœ¼ë‚˜, ê·¼ë˜ì—ëŠ” 'ê°„ì½”ì¿ ê³ (í•œ
êµ­ì–´)'ë¼ê³  ë¶€ë¥´ëŠ” ê²½í–¥ì´ ê°•í•˜ë‹¤. ì¼ë³¸ ë‚´ì˜ í•œì¸(éŸ“äºº) êµí¬ ì‚¬íšŒëŠ” ì¬ì¼ë³¸
ëŒ€í•œë¯¼êµ­ë¯¼ë‹¨(ë¯¼ë‹¨)ê³¼ ì¬ì¼ë³¸ì¡°ì„ ì¸ì´ë ¨í•©íšŒ(ì´ë ¨)ë¡œ ê°ˆë¼ì ¸ ê°ê° í‘œì¤€ì–´ì™€ ë¬¸í™”
ì–´ë¥¼ ì§€ì§€í•˜ëŠ” ê²½í–¥ì´ ìˆìœ¼ë¯€ë¡œ NHKëŠ” í•œêµ­ì–´ íšŒí™” ëª…ì¹­ì„ 'ê°„ì½”ì¿ ê³ (í•œêµ­ì–´)
', 'ì¡°ì„¼ê³ (ì¡°ì„ ì–´)' ëŒ€ì‹  'í•œêµ¬ë£¨ ê³ ì'(ãƒãƒ³ã‚°ãƒ«è¬›åº§, í•œê¸€ ê°•ì¢Œ)ë¼ê³  í•˜
ì˜€ë‹¤. ê·¸ ë°–ì—ë„ ì¤‘ë¦½ì„±ì„ ê³ ë ¤í•˜ì—¬ 'ê³ ë¦¬ì•„ê³ '(ã‚³ãƒªã‚¢èª, ì½”ë¦¬ì•„ì–´)ë‚˜ 'ê°€ë¼
ë…¸ì¿ ë‹ˆë…¸ì½”í† ë°”'(éŸ“ã®å›½ã®ã“ã¨ã°, ã‹ã‚‰ã®ãã«ã®ã“ã¨ã°, í•œë‚˜ë¼ë§) ë“±ì˜ ëª…ì¹­
ì„ ì“°ê¸°ë„ í•œë‹¤. 'ê³ ë¦¬ì•„ê³ (ì½”ë¦¬ì•„ì–´)'ëŠ” 1977ë…„ ì¡°ì¹˜ ëŒ€í•™êµê°€ ì²˜ìŒìœ¼ë¡œ ì „ê³µ
 í•™ê³¼ë¥¼ ê°œì„¤í•œ ì´í›„ ì¼ë¶€ ëŒ€í•™êµì—ì„œ ì“´ë‹¤.

ì¤‘í™”ë¯¼êµ­(íƒ€ì´ì™„)ì€ í•œêµ­ì–´ë¥¼ 'í•œê¶ˆìœ„(ì¤‘êµ­ì–´: éŸ“åœ‹èª, ë³‘ìŒ: HÃ¡nguÃ³yÇ”, 
í•œêµ­ì–´)'ë‚˜ 'í•œìœ„(ì¤‘êµ­ì–´: éŸ“èª, ë³‘ìŒ: HÃ¡nyÇ”, í•œì–´)'ë¡œ ë¶€ë¥¸ë‹¤.

ë² íŠ¸ë‚¨ì—ì„œì˜ ìš©ë²•ì€ ì¤‘êµ­ê³¼ ê±°ì˜ ë¹„ìŠ·í•˜ë‹¤. í˜„ì¬ëŠ” í•œìë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì§€ë§Œ, ê³¼
ì— í•œì ë¬¸í™”ê¶Œì— ì†í–ˆë˜ ë² íŠ¸ë‚¨ì€ í•œêµ­ì„ 'ì©¨ìš°ë ì—”'(ë² íŠ¸ë‚¨ì–´: Triá»u TiÃªn,
 æœé®®)ì´ë¼ê³  ë¶ˆë €ê³ , ëŒ€í•œë¯¼êµ­ì€ 'ë‚¨ì©¨ìš°ë ì—”'(ë² íŠ¸ë‚¨ì–´: Nam Triá»u TiÃªn
 , å—æœé®®), í•œêµ­ì–´ëŠ” 'ë ì—¥ì©¨ìš°ë ì—”'(Tiáº¿ng Triá»u TiÃªn, æœé®®èª)ìœ¼ë¡œ ë¶ˆ
 ë €ë‹¤. í•œêµ­ì— ê´€ë ¨ëœ ì¼ë°˜ ì–´íœ˜ëŠ” ë¬¸í™”ì–´ ê³„ì—´ì˜ ì–´íœ˜ê°€ ë” ë§ì´ ì“°ì¸ë‹¤. ëŒ€í•œë¯¼
 êµ­ì˜ í‘œì¤€ì–´ëŠ” 'ë ì—¥í•œ'(Tiáº¿ng HÃ n, éŸ“èª)ì´ë¼ê³  ë¶€ë¥¸ë‹¤.
STRING

      sanitized_string = RemoveEmoji::Sanitize.call(original_string)

      sanitized_string.must_equal(original_string)
    end

    it 'å¿…é ˆä¸æœƒç§»é™¤åˆ°ç°¡é«”ä¸­æ–‡å…§å®¹ï¼Œè·Ÿæ‰€æœ‰çš„æ–‡ä¸­ç¬¦è™Ÿ' do
      original_string = <<-STRING
ç®€ä½“ç”¨è¯­ç¼–è¾‘
ç®€ä½“ä¸­æ–‡å’Œç¹ä½“ä¸­æ–‡é™¤äº†æ±‰å­—å†™æ³•ï¼ˆå¦‚ç®€åŒ–å­—å’Œç¹ä½“å­—é—´ï¼Œä»¥åŠå„åœ°æ±‰å­—å†™æ³•è§„èŒƒï¼‰
çš„å·®å¼‚å¤–ï¼Œé€šå¸¸è®¤ä¸ºè¿˜å­˜åœ¨è¯æ±‡ä¸Šçš„å·®å¼‚ã€‚ä¾‹å¦‚ç¹ä½“ä¸­æ–‡é‡Œå¤šç”¨çš„â€œåŸå­ç¬”â€ï¼Œåœ¨
ç®€ä½“ä¸­æ–‡ä¸­å¤šç”¨â€œåœ†ç ç¬”â€ï¼Œç¹ä½“ä¸­æ–‡é‡Œçš„â€œå²è¾¾æ—â€åœ¨ç®€ä½“ä¸­æ–‡é‡Œè¢«ç§°ä¸ºâ€œæ–¯å¤§æ—â€ï¼Œ
ç¹ä½“ä¸­æ–‡é‡Œçš„â€œåŒ—éŸ©â€åœ¨ç®€ä½“ä¸­æ–‡é‡Œè¢«ç§°ä¸ºâ€œæœé²œã€”æ­¤å¤„æŒ‡æœé²œæ°‘ä¸»ä¸»ä¹‰äººæ°‘å…±å’Œå›½ã€•
â€ï¼Œç¹ä½“ä¸­æ–‡é‡Œçš„â€œé›ªæ¢¨ã€”æ¾³å¤§åˆ©äºšåŸå¸‚ã€•â€åœ¨ç®€ä½“ä¸­æ–‡é‡Œè¢«ç§°ä¸ºâ€œæ‚‰å°¼â€ç­‰ã€‚ç”±äºæœ‰è¿™
ç§å·®å¼‚ï¼Œâ€œç®€ä½“ç”¨è¯­â€è¿™ç§è¯´æ³•éšä¹‹äº§ç”Ÿã€‚ä¸è¿‡å…¶å®è¿™å¹¶éç¹ç®€ä¸­æ–‡æœ¬èº«çš„å·®å¼‚ï¼Œè€Œ
ä¸»è¦æ˜¯ç”±äºä½¿ç”¨ä¸¤è€…çš„äººç¾¤ï¼Œå°¤å…¶æ˜¯ä¸­å›½å¤§é™†å’Œå°æ¹¾åœ¨20ä¸–çºªä¸­å¶ç”±äºæ”¿æ²»åŸå› åˆ†éš”
åäº¤æµè¾ƒå°‘ï¼Œé€ æˆäº†ç”¨è¯ä¹ æƒ¯çš„å·®å¼‚ã€‚è¿™ç§ç°è±¡åœ¨1980å¹´ä»£ä»¥æ¥ç”±äºç§‘æŠ€æœ¯è¯­çš„ä¸åŒ
è€Œæ›´åŠ æ˜æ˜¾ã€‚è€Œä¸”ï¼Œåœ¨åŒæ ·ä½¿ç”¨ç®€ä½“ä¸­æ–‡çš„ä¸­å›½å¤§é™†ã€æ–°åŠ å¡ç­‰åœ°ä¹Ÿå­˜åœ¨ä¸€äº›ç”¨è¯ä¹ 
æƒ¯çš„ä¸åŒã€‚å› æ­¤ï¼Œæœ‰äººæŒ‡å‡ºæ­£ç¡®çš„ææ³•åº”ä¸ºâ€œä¸­å›½å¤§é™†ç”¨è¯­â€ã€â€œæ–°åŠ å¡ç”¨è¯­â€ç­‰ï¼Œè€Œé
â€œç®€ä½“ç”¨è¯­â€ã€‚
ç”µè„‘ä½¿ç”¨ç¼–è¾‘
ç”±äºä½¿ç”¨ç®€ä½“ä¸­æ–‡çš„ä¸»è¦æ˜¯ä¸­å›½å¤§é™†ï¼Œæ•…æ­¤ç”µè„‘ä¸­çš„â€œç®€ä½“ä¸­æ–‡â€ä¸€ç›´ä»¥æ¥å…¶å®ä»£æŒ‡â€œ
ä¸­å›½å¤§é™†ä¸­æ–‡â€ï¼Œæ„å³ç»å¤§éƒ¨ä»½è½¯ä»¶çš„â€œç®€ä½“ä¸­æ–‡ç‰ˆâ€ä½¿ç”¨çš„æ˜¯ä¸­å›½å¤§é™†çš„ç”¨è¯­å’Œç¿»è¯‘ï¼Œ
æ­¤ç­‰è½¯ä»¶äº¦é€šè¡Œäºå…¶ä»–ä½¿ç”¨ç®€ä½“ä¸­æ–‡çš„ç¤¾ç¾¤ã€‚
Windowsæ“ä½œç³»ç»Ÿçš„è¯­è¨€ä»£ç é€šå¸¸ä½¿ç”¨zh-CNè¡¨ç¤ºç®€ä½“ä¸­æ–‡(ä¸­å›½)
ä¸­æ–‡ç¼–ç ç¼–è¾‘
ç®€ä½“ä¸­æ–‡è‡ª1980å¹´ä»£ä»¥æ¥é€šå¸¸ä½¿ç”¨ä¸­åäººæ°‘å…±å’Œå›½å›½å®¶æ ‡å‡†æ€»å±€å…¬å¸ƒçš„GB 2312ï¼Œä»¥åŠ
å…¶åç»§çš„GBKå’ŒGB 18030ä¸­æ–‡ç¼–ç ã€‚è¿‘å¹´æ¥éšç€Unicodeè·¨è¯­è¨€ç¼–ç é›†çš„å‡ºç°ï¼Œä¹Ÿè¢«å¹¿æ³›ä½¿ç”¨ã€‚
ç®€ä½“æ¥å†ç¼–è¾‘
ä¸­å›½æ–‡å­—çš„ç®€åŒ–ï¼Œæ˜¯äºŒåä¸–çºªäº”åå¹´ä»£ä¸­æœŸï¼Œä¸­å›½å¤§é™†æ”¿åºœåœ¨å‘¨æ©æ¥æ€»ç†çš„ç›´æ¥ä¸»æŒå…³å¿ƒ
ä¸‹ï¼Œç»“åˆäº†ä¸Šç™¾åä¸“å®¶ï¼Œå¯¹æ•°åƒä¸ªå¸¸ç”¨çš„ä¸­å›½æ–‡å­—è¿›è¡Œäº†ä¸€æ¬¡å­—ä½“çš„ç®€åŒ–ã€‚å½“æ—¶çš„å‡ºå‘
ç‚¹ï¼Œåº”è¯¥è¯´æ˜¯åˆ†æäº†ä¸­å›½çš„å›½æƒ…ã€‚ä¸­å›½ç»å†äº†ä¸Šç™¾å¹´çš„å†…å¿§å¤–æ‚£ï¼Œå›½å¼±æ°‘ç©·ã€‚ä¸­å›½åˆæ˜¯ä¸€
ä¸ªå‡ åƒå¹´çš„å†œä¸šå›½ï¼Œç™¾åˆ†ä¹‹å…«åä»¥ä¸Šçš„äººå£åœ¨å†œæ‘ï¼Œè€Œå½“æ—¶ä¸­å›½ä¸€åŠä»¥ä¸Šçš„äººå£æ˜¯æ–‡ç›²å’Œ
åŠæ–‡ç›²ï¼Œè€Œè¦åœ¨è¿™æ ·çš„åŸºç¡€ä¸Šå‘å±•æ–‡åŒ–ï¼Œå»ºè®¾å›½å®¶ï¼Œè¯†å­—æ‰«ç›²æˆäº†ä¸€ä¸ªé‡è¦çš„å†å²ä»»åŠ¡ã€‚
ç®€åŒ–æ–‡å­—ï¼Œå½“æ—¶çš„ç›®çš„ï¼Œå°±æ˜¯ä¸ºäº†è®©æ•°ä»¥äº¿è®¡çš„äººæ°‘å¤§ä¼—ï¼Œèƒ½å¤Ÿå°½æ—©å°½å¿«åœ°è¯†å­—è®¤å­—ï¼Œæ
é«˜ä½¿ç”¨æ–‡å­—çš„é€Ÿåº¦ï¼Œæå‡æ–‡åŒ–æ°´å¹³ï¼Œæ–¹ä¾¿å­¦ç”Ÿåœ¨æ ¡å­¦ä¹ ï¼Œä»¥æ­¤ä¸ºæœ€åŸºæœ¬çš„åŸºç¡€ï¼Œæ‰æœ‰å¯èƒ½
å­¦ä¹ ç§‘æŠ€ï¼Œå»ºç«‹ä¸€ä¸ªå¯Œå¼ºçš„å›½å®¶ã€‚
æœ‰äº›å°æ¹¾äººç¬¬ä¸€çœ¼çœ‹åˆ°ç®€ä½“å­—ï¼Œå¤§æ¦‚ä¼šæ„Ÿåˆ°æƒŠè®¶ã€‚ä¸­å›½å¤§é™†çš„å­—æ”¹å˜äº†é‚£ä¹ˆå¤šï¼Œå°¤å…¶æ˜¯ç¦»
ä¹¡å‡ åå¹´çš„è€å…µï¼Œçœ‹åˆ°å®¶ä¹¡å˜äº†ï¼Œæ–‡å­—ä¹Ÿå˜äº†ã€‚æœ‰çš„äººè®¨åŒçœ‹ç®€ä½“å­—ï¼Œä¸€è§åˆ°å®ƒå°±è¯´æ˜¯â€œåŒª
ä¹¦â€œã€â€œåŒªæ–‡â€œã€‚æ›´æœ‰çš„äººæŠŠæ–‡å­—ç®€åŒ–è¿åŠ¨çœ‹æ»¡æ¸…æ”¿åºœçš„å‰ƒå‘ç›¸æå¹¶è®ºï¼Œè¯´å…±äº§å…šä¸ºäº†è¦æ”¹é€ 
äººæ°‘ï¼Œå¼ºè¿«äººæ°‘é˜…è¯»ç®€ä½“å­—ï¼Œäº‹å®ä¸Šä¸ç„¶ã€‚
æ±‰å­—è‡ªå¤ä»¥æ¥å°±æœ‰ç¹ä½“ä¸ç®€ä½“ä¸¤å¥—å†™æ³•ï¼Œåœ¨ç”²éª¨æ–‡ä¸é‡‘æ–‡ä¸­ï¼Œå°±å¯å‘ç°æ±‰å­—ç®€ä½“çš„å½¢è¿¹ï¼Œä¾‹
å¦‚â€œè½¦â€œå°±æœ‰å¤šç§å†™æ³•ã€‚åæ¥ç»è¿‡ç¯†ä½“éš¶åŒ–ï¼Œå¹¶å­˜ä¸¤ç§å†™æ³•çš„æ–‡å­—è¶Šæ¥è¶Šå¤šã€‚ç”±å…­æœåˆ°éš‹å”ï¼Œ
æ±‰å­—é€æ¸éš¶æ¥·åŒ–ï¼Œå½“æ—¶æˆ–è®¸æ˜¯ä¸ºäº†ç¾è§‚å¯¹ç§°ï¼Œå¾ˆå¤šå¤å­—éƒ½å¢åŠ ç¬”ç”»ï¼Œè€Œç®€ä½“å­—å¼€å§‹è¢«ç§°ä¸ºâ€œä¿—
ä½“â€œã€â€œå°å†™â€œã€â€œç ´å­—â€œç­‰ï¼Œåœ¨æ°‘é—´ç¤¾ä¼šä»å¹¿ä¸ºæµä¼ ã€‚
ä¸è¿‡ï¼Œæœ‰æ—¶å€™æ–‡å­—æœ‰ç®€åŒ–å’Œç¹åŒ–çš„ç°è±¡ï¼Œå·¦ä¼ å’Œç”²éª¨æ–‡ä¸Šæœ‰å‡å€Ÿå­—ï¼Œå½“ä¸€ä»¶æˆ‘ä»¬è¦è¡¨è¾¾çš„äº‹å¾ˆ
æŠ½è±¡ï¼Œæœ€åˆæ—¶æ— æ³•é€ å­—ï¼Œäºæ˜¯æ‰¾æ¥ä¸€ä¸ªä¸å®ƒéŸ³è¿‘çš„å­—æ¥å€Ÿä»£ï¼Œå½“åæ¥æˆ–è€…å¯ä»¥é€ å­—äº†ï¼Œå°±æœ‰è¿™
ä¸ªæŠ½è±¡æ¦‚å¿µçš„æœ¬å­—äº†ã€‚æœ‰æ—¶åæ¥ä»æ—§æ— æ³•é€ å­—ï¼Œäºæ˜¯ä¸€ä¸ªå­—å»åŠ åæ—ï¼Œå»åˆ«å¼‚ï¼Œè¡¨ç¤ºä¸æœ¬æ¥å‡
å€Ÿçš„å­—ä¸åŒã€‚è€Œæœ‰æ—¶ä¸€ä¸ªå­—è¶Šå†™è¶Šç¹äº†ï¼Œäººæœ‰è§‰å¾—éº»çƒ¦äº†ï¼Œå°±å»ç®€åŒ–äº†ï¼Œäºæ˜¯åœ¨é­æ™‹æœ‰ä¿—æ–‡å­—
å­¦ï¼Œå³ä¿—ä½“å­—ã€‚ä¹Ÿæœ‰çš„å­—è¶Šæ¥è¶Šç®€å•äº†ï¼Œåˆä¸æ˜“çœ‹æ¸…æœ¬ä¹‰äº†ï¼Œæ‰€ä»¥åˆå»æ›¿å®ƒåŠ ç¬”ç”»äº†ï¼Œæ‰€ä»¥ç¹
åŒ–äº†ã€‚
æ‰€ä»¥ï¼Œç¬”åˆ’å†™å¾—è¶Šæ¥è¶Šç¹çš„å­—ï¼Œç»å¯¹ä¸å°‘äºå†™å¾—è¶Šæ¥è¶Šç®€çš„å­—ã€‚
ç¹åŒ–å’Œç®€åŒ–çš„å­—ï¼Œåœ¨å¤ä»£å°±å·²å­˜åœ¨ã€‚æœ‰äº›äººé€ æ–°å­—ï¼Œåæ¥å°±é€šè¡Œä½¿ç”¨ã€‚ä¾‹å¦‚ï¼šæ¨åšåœ¨åŒ—å‘¨æ—¶ä»¥å¤–
æˆšè¾…æ”¿ï¼Œè¿›å°â€œéšç‹â€œï¼Œä½†ä»–å«Œâ€œéšâ€œæœ‰â€œèµ°â€œä¹‹æ„ï¼Œäºæ˜¯æ”¹â€œéšâ€œä¸ºâ€œéš‹â€œã€‚æ­¦åˆ™å¤©æœ€çˆ±é€ å­—ï¼Œå¥¹ä¸€ç”Ÿ
é€ äº†åå¤šä¸ªå­—ã€‚å…¶ä¸­ä¸€ä¸ªâ€œå›½â€œå­—ï¼Œå¥¹æ”¹æˆâ€œå£â€œä¸­é—´åŠ â€œæ­¦â€œï¼Œä½†åæ¥è§‰å¾—è‡ªå·±è¢«åŒ…å›´åœ¨å›´åŸä¸­ï¼Œ
å°±ä¸å†ä½¿ç”¨ã€‚ä¸­å›½æ–‡å­—åœ¨ç§¦å§‹çš‡ç»Ÿä¸€æ–‡å­—ä¹‹åï¼Œéšè‘—æ—¶ä»£æ”¹å˜ï¼Œå‡ºç°äº†ç¹ä½“ã€ç®€ä½“ã€ä¿—ä½“ã€å¼‚ä½“
ç­‰å­—ã€‚å®˜æ–¹çš„æ–‡ä¹¦ï¼Œéƒ½é‡‡ç”¨ç¹ä½“ï¼Œå…¶ä»–çš„æ–‡å­—æ˜¯éš¾ç™»å¤§é›…ä¹‹å ‚ã€‚è¿™æ®µæœŸé—´ï¼Œæ°‘é—´æ–‡å­—çš„ä½¿ç”¨å¤šæ˜¯
é‡‡çº¦å®šæˆä¿—çš„æ–¹å¼ï¼Œä¸€ç›´åˆ°å¤ªå¹³å¤©å›½æ—¶æœŸï¼Œæ‰å¼€å§‹æ–‡å­—çš„ç®€åŒ–ã€‚
STRING

      sanitized_string = RemoveEmoji::Sanitize.call(original_string)

      sanitized_string.must_equal(original_string)
    end


    it 'å¿…é ˆä¸æœƒç§»é™¤åˆ°æ—¥æœ¬è³‡æ–™è·Ÿæ–‡ä¸­çš„æ‰€æœ‰ç¬¦è™Ÿå…§å®¹' do
      original_string = nil
      sanitized_string = nil
      benchmark_info = Benchmark.measure do
        100.times do
          original_string = <<-STRING
    == Sample Text for Test Program ==
    ã€Œã«ã£ã½ã‚“ã€ã€ã€Œã«ã»ã‚“ã€ã¨èª­ã¾ã‚Œã‚‹ã€‚ã©ã¡ã‚‰ã‚‚å¤šãç”¨ã„ã‚‰ã‚Œã¦ã„ã‚‹ãŸã‚ã€
    æ—¥æœ¬æ”¿åºœã¯æ­£å¼ãªèª­ã¿æ–¹ã‚’ã©ã¡ã‚‰ã‹ä¸€æ–¹ã«ã¯å®šã‚ã¦ãŠã‚‰ãšã€ã©ã¡ã‚‰ã®èª­ã¿ã§
    ã‚‚è‰¯ã„ã¨ã—ã¦ã„ã‚‹[5]ã€‚

    7ä¸–ç´€ã®å¾ŒåŠã®å›½éš›é–¢ä¿‚ã‹ã‚‰ç”Ÿã˜ãŸã€Œæ—¥æœ¬ã€å›½å·ã¯ã€å½“æ™‚ã®å›½éš›çš„ãªèª­ã¿ï¼ˆéŸ³èª­ï¼‰
    ã§ã€Œãƒ‹ãƒƒãƒãƒ³ã€ï¼ˆå‘‰éŸ³ï¼‰ãªã„ã—ã€Œã‚¸ãƒƒãƒãƒ³ã€ï¼ˆæ¼¢éŸ³ï¼‰ã¨èª­ã¾ã‚ŒãŸã‚‚ã®ã¨æ¨æ¸¬ã•ã‚Œã‚‹
    [6]ã€‚ã„ã¤ã€Œãƒ‹ãƒ›ãƒ³ã€ã®èª­ã¿ãŒå§‹ã¾ã£ãŸã‹å®šã‹ã§ãªã„ã€‚ä»®åè¡¨è¨˜ã§ã¯ã€Œã«ã»ã‚“ã€ã¨
    è¡¨è¨˜ã•ã‚ŒãŸã€‚å¹³å®‰æ™‚ä»£ã«ã¯ã€Œã²ã®ã‚‚ã¨ã€ã¨ã‚‚å’Œè¨“ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚
    å®¤ç”ºæ™‚ä»£ã®è¬¡æ›²ãƒ»ç‹‚è¨€ã¯ã€ä¸­å›½äººã«ã€Œãƒ‹ãƒƒãƒãƒ³ã€ã¨èª­ã¾ã›ã€æ—¥æœ¬äººã«ã€Œãƒ‹ãƒ›ãƒ³ã€ã¨
    èª­ã¾ã›ã¦ã„ã‚‹ã€‚å®‰åœŸæ¡ƒå±±æ™‚ä»£ã«ãƒãƒ«ãƒˆã‚¬ãƒ«äººãŒç·¨çº‚ã—ãŸã€æ—¥è‘¡è¾æ›¸ã€ã‚„ã€æ—¥æœ¬å°æ–‡
    å…¸ã€ç­‰ã«ã¯ã€ã€Œãƒ‹ãƒƒãƒãƒ³ã€ã€Œãƒ‹ãƒ›ãƒ³ã€ã€Œã‚¸ãƒƒãƒãƒ³ã€ã®èª­ã¿ãŒè¦‹ã‚‰ã‚Œã€ãã®ç”¨ä¾‹ã‹ã‚‰
    åˆ¤æ–­ã™ã‚‹ã¨ã€æ”¹ã¾ã£ãŸå ´é¢ãƒ»å¼·èª¿ã—ãŸã„å ´åˆã«ã€Œãƒ‹ãƒƒãƒãƒ³ã€ãŒä½¿ã‚ã‚Œã€æ—¥å¸¸ã®å ´é¢
    ã§ã€Œãƒ‹ãƒ›ãƒ³ã€ãŒä½¿ã‚ã‚Œã¦ã„ãŸ[7]ã€‚ã“ã®ã“ã¨ã‹ã‚‰å°æ± æ¸…æ²»ã¯ã€ä¸­ä¸–ã®æ—¥æœ¬äººãŒä¸­å›½
    èªçš„ãªèªæ„Ÿã®ã‚ã‚‹ã€Œã‚¸ãƒƒãƒãƒ³ã€ã‚’ä½¿ç”¨ã—ãŸã®ã¯ã€ä¸­å›½äººãƒ»è¥¿æ´‹äººãªã©å¯¾å¤–çš„ãªå ´é¢
    ã«é™å®šã•ã‚Œã¦ã„ã¦ã€æ—¥å¸¸ã ã¨ã€Œãƒ‹ãƒƒãƒãƒ³ã€ã€Œãƒ‹ãƒ›ãƒ³ã€ãŒç”¨ã„ã‚‰ã‚Œã¦ã„ãŸã®ã§ã¯ã€ã¨
    æ¨æ¸¬ã—ã¦ã„ã‚‹[8]ã€‚ãªãŠã€ç¾åœ¨ã«ä¼ã‚ã£ã¦ã„ãªã„ã€Œã‚¸ãƒƒãƒãƒ³ã€éŸ³ã«ã¤ã„ã¦ã¯ã€ãã®
    ä»–ã®è¨€èªã‚‚å‚ç…§ã€‚
    STRING
          sanitized_string = RemoveEmoji::Sanitize.call(original_string)
        end
      end

      best_performance = benchmark_info.real < 0.05
      best_performance.must_equal(true)
    end

  end

end